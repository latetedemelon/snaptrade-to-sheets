<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    input { width: 100%; padding: 8px; margin: 6px 0 16px; border: 1px solid #ddd; border-radius: 4px; }
    label { font-weight: bold; font-size: 13px; }
    .btn { background: #1a73e8; color: #fff; padding: 10px 16px; border: none; border-radius: 4px; cursor: pointer; }
    .btn:hover { background: #1557b0; }
    #status { margin-top: 10px; font-size: 13px; color: #155724; }
  </style>
</head>
<body>
  <h3>Configure SnapTrade Credentials</h3>
  <p>Enter your SnapTrade <strong>Client ID</strong> and <strong>Consumer Key</strong>. These values are stored in script properties.</p>
  <form id="api-form">
    <label for="clientId">Client ID</label>
    <input type="text" id="clientId" name="clientId" required>

    <label for="consumerKey">Consumer Key</label>
    <input type="password" id="consumerKey" name="consumerKey" required>

    <button class="btn" type="submit">Save Keys</button>
  </form>
  <div id="status"></div>

  <script>
    const form = document.getElementById('api-form');
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      const clientId = document.getElementById('clientId').value.trim();
      const consumerKey = document.getElementById('consumerKey').value.trim();
      document.getElementById('status').textContent = 'Saving...';
      google.script.run
        .withSuccessHandler(function() {
          document.getElementById('status').textContent = 'Credentials saved.';
        })
        .withFailureHandler(function(err) {
          document.getElementById('status').textContent = 'Error: ' + err.message;
        })
        .saveApiKeys(clientId, consumerKey);
    });
  </script>
</body>
</html>
